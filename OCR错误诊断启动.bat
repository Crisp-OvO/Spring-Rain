@echo off
chcp 65001 >nul
title OCRé”™è¯¯æ·±åº¦è¯Šæ–­ç³»ç»Ÿ

echo.
echo ðŸ”¬ ==========================================
echo    OCRé”™è¯¯æ·±åº¦è¯Šæ–­ç³»ç»Ÿ - ä¸“ä¸šç‰ˆ
echo ==========================================
echo.
echo ðŸŽ¯ è¯Šæ–­èƒ½åŠ›:
echo    âœ… è¯¦ç»†APIé”™è¯¯åˆ†æž (HTTP 400/401/403/500)
echo    âœ… å›¾ç‰‡æ ¼å¼å…¼å®¹æ€§æµ‹è¯•
echo    âœ… å¤šç§å°ºå¯¸é€‚é…æµ‹è¯•
echo    âœ… Base64ç¼–ç éªŒè¯
echo    âœ… å†…ç½®æµ‹è¯•å›¾ç‰‡ + è‡ªå®šä¹‰ä¸Šä¼ 
echo    âœ… å®žæ—¶é”™è¯¯æ—¥å¿—åˆ†æž
echo.

echo ðŸ”§ é…ç½®APIå¯†é’¥...
set DASHSCOPE_API_KEY=sk-2763f2c284eb4503845e73ff6b58c172

echo ðŸ“‚ è¿›å…¥é¡¹ç›®ç›®å½•...
cd /d "%~dp0math-solver-backend"

echo.
echo ðŸš€ å¯åŠ¨å‡çº§ç‰ˆOCRè¯Šæ–­åŽç«¯...
echo    æœåŠ¡åœ°å€: http://localhost:3001
echo    è¯Šæ–­é¡µé¢: http://localhost:3001/ocr-debug-advanced.html
echo.
echo ðŸ’¡ è¯Šæ–­æµç¨‹:
echo    1. é€‰æ‹©å†…ç½®æµ‹è¯•å›¾ç‰‡æˆ–ä¸Šä¼ æ‚¨çš„å›¾ç‰‡
echo    2. æ‰§è¡Œå®Œæ•´è¯Šæ–­ (å›¾ç‰‡åˆ†æž+APIæµ‹è¯•+OCRè¯†åˆ«)
echo    3. æŸ¥çœ‹è¯¦ç»†çš„é”™è¯¯åˆ†æžå’Œè§£å†³å»ºè®®
echo    4. æµ‹è¯•ä¸åŒæ ¼å¼å’Œå°ºå¯¸çš„å…¼å®¹æ€§
echo.

start "" node server.js

echo ðŸ“± æ­£åœ¨æ‰“å¼€OCRé”™è¯¯è¯Šæ–­ä¸“å®¶é¡µé¢...
timeout /t 3 /nobreak >nul
start "" "http://localhost:3001/ocr-debug-advanced.html"

echo.
echo âœ… è¯Šæ–­ç³»ç»Ÿå¯åŠ¨å®Œæˆï¼
echo.
echo ðŸ” è¯Šæ–­æç¤º:
echo    â€¢ é¦–å…ˆå°è¯•å†…ç½®çš„ç®€å•æµ‹è¯•å›¾ç‰‡
echo    â€¢ å¦‚æžœå†…ç½®å›¾ç‰‡ä¹Ÿå¤±è´¥ï¼Œè¯´æ˜Žæ˜¯APIé…ç½®é—®é¢˜
echo    â€¢ å¦‚æžœå†…ç½®å›¾ç‰‡æˆåŠŸï¼Œæ‚¨çš„å›¾ç‰‡å¤±è´¥ï¼Œè¯´æ˜Žæ˜¯å›¾ç‰‡è´¨é‡é—®é¢˜
echo    â€¢ æŸ¥çœ‹è¯¦ç»†çš„é”™è¯¯æ—¥å¿—æ¥å®šä½å…·ä½“åŽŸå› 
echo.
echo ðŸ“ž å¦‚æžœéœ€è¦æ›´å¤šå¸®åŠ©ï¼Œè¯·æä¾›:
echo    â€¢ å…·ä½“çš„HTTPé”™è¯¯ä»£ç 
echo    â€¢ APIå“åº”çš„è¯¦ç»†ä¿¡æ¯
echo    â€¢ å›¾ç‰‡çš„æ ¼å¼å’Œå¤§å°ä¿¡æ¯
echo.
echo æŒ‰ä»»æ„é”®é€€å‡º...
pause >nul 